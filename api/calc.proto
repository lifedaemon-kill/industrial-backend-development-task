syntax = "proto3";

package calculator;

option go_package = "/pkg/calculator";

import "google/api/annotations.proto";

service Calculator {
  rpc Calc(CalcRequest) returns (CalcResponse) {
    option(google.api.http) = {
      post:"/api/calc"
      body: "*"
    };
  }
}

message CalcRequest {
  repeated Command commands = 1;
}

message CalcResponse{
  repeated Item item = 1;

  message Item {
    string var = 1;
    float value = 2;
  }

   int64 duration = 3;
}

message Command {
  string type = 1;

  oneof command {
    CalcCommand calc = 2;
    PrintCommand  print = 3;
  }
}

message CalcCommand {
  string op = 1;
  string var = 2;
  string sign = 3;
  float left = 4;
  float right = 5;
}

message PrintCommand {
  string var = 1;
}